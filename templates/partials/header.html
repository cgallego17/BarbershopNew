{% load static %}
{% if site_settings.topbar_marquee_text %}
<div class="topbar topbar--three topbar--marquee">
    <div class="topbar__marquee-wrap">
        <div class="topbar__marquee-content" aria-live="polite">
            {% for _ in "123456789012" %}
            <span class="topbar__marquee-text">{{ site_settings.topbar_marquee_text }}</span>
            <span class="topbar__marquee-sep" aria-hidden="true"> &nbsp;&bull;&nbsp; </span>
            {% endfor %}
        </div>
    </div>
</div>
<style>
.topbar--marquee {
    width: 100vw;
    max-width: none;
    margin-left: calc(50% - 50vw);
    padding: 0;
    overflow: hidden;
    box-sizing: border-box;
}
.topbar--marquee .topbar__marquee-wrap {
    position: relative;
    overflow: hidden;
    width: 100%;
    padding: 10px 20px;
    color: #fff;
    box-sizing: border-box;
}
.topbar--marquee .topbar__marquee-content {
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
    animation: topbar-marquee 35s linear infinite;
    color: #fff;
    flex-shrink: 0;
    /* Porcentajes relativos al ancho del wrap: entra por la derecha (100%) y recorre toda la barra */
    margin-left: 100%;
}
.topbar--marquee .topbar__marquee-text,
.topbar--marquee .topbar__marquee-sep { color: #fff; }
.topbar--marquee .topbar__marquee-sep { opacity: .85; }
/* Infinito: 12 repeticiones, un ciclo = 1/12 del contenido (-8.333%), bucle continuo */
@keyframes topbar-marquee {
    0%   { margin-left: 100%; }
    100% { margin-left: -8.333%; }
}
</style>
{% endif %}

<header class="main-header main-header--three sticky-header sticky-header--normal">
    <div class="main-header__bg" style="background-image: url({% static 'assets/images/backgrounds/main-header-3-bg.jpg' %});"></div>
    <div class="main-header__container container">
        <div class="main-header__top">
            <div class="main-header__social">
                {% if site_settings.facebook_url %}<a href="{{ site_settings.facebook_url }}" target="_blank" rel="noopener"><i class="fab fa-facebook-f" aria-hidden="true"></i><span class="sr-only">Facebook</span></a>{% endif %}
                {% if site_settings.instagram_url %}<a href="{{ site_settings.instagram_url }}" target="_blank" rel="noopener"><i class="fab fa-instagram" aria-hidden="true"></i><span class="sr-only">Instagram</span></a>{% endif %}
                {% if site_settings.twitter_url %}<a href="{{ site_settings.twitter_url }}" target="_blank" rel="noopener"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Twitter</span></a>{% endif %}
                {% if site_settings.youtube_url %}<a href="{{ site_settings.youtube_url }}" target="_blank" rel="noopener"><i class="fab fa-youtube" aria-hidden="true"></i><span class="sr-only">YouTube</span></a>{% endif %}
            </div>
            <div class="main-header__top__right">
                <div class="main-header__logo">
                    <a href="{% url 'core:home' %}">
                        {% if site_settings.logo %}<img src="{{ site_settings.logo.url }}" alt="Logo {{ site_settings.site_name }}" width="171">{% else %}<img src="{% static 'logo-768x317.png' %}" alt="Logo {{ site_settings.site_name|default:'The BARBERSHOP' }}" width="171">{% endif %}
                    </a>
                </div>
                <div class="main-header__top__icon-group">
                    <a href="#" class="search-toggler main-header__search" title="Buscar">
                        <i class="fas fa-search" aria-hidden="true"></i>
                        <span class="sr-only">Buscar</span>
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'orders:list' %}" class="main-header__user" title="Mi cuenta">
                        <i class="icon-user" aria-hidden="true"></i>
                        <span class="sr-only">Mi cuenta</span>
                    </a>
                    {% if user.can_access_dashboard %}
                    <a href="{% url 'dashboard' %}" class="main-header__user" title="Panel admin">
                        <i class="fas fa-chart-line" aria-hidden="true"></i>
                        <span class="sr-only">Panel</span>
                    </a>
                    {% endif %}
                    {% if user.is_wholesale %}
                    <a href="{% url 'wholesale:panel' %}" class="main-header__user" title="Panel mayoristas">
                        <i class="fas fa-store" aria-hidden="true"></i>
                        <span class="sr-only">Mayoristas</span>
                    </a>
                    {% endif %}
                    {% else %}
                    <a href="{% url 'account_login' %}" class="main-header__user" role="button" data-bs-toggle="modal" data-bs-target="#loginModal">
                        <i class="icon-user" aria-hidden="true"></i>
                        <span class="sr-only">Ingresar</span>
                    </a>
                    {% endif %}
                </div>
                {% if site_settings.phone %}
                <div class="main-header__call">
                    <span class="main-header__call__icon icon-phone-call"></span>
                    <div class="main-header__call__inner">
                        <span class="main-header__call__tagline">Ll√°manos</span>
                        <a href="tel:{{ site_settings.phone|cut:' ' }}" class="main-header__call__number">{{ site_settings.phone }}</a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="main-header__inner">
            <div class="main-header__sidebar-btn sidebar-btn__toggler">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav class="main-header__nav main-menu">
                <ul class="main-menu__list">
                    <li><a href="{% url 'core:home' %}">Inicio</a></li>
                    <li><a href="{% url 'products:list' %}">Productos</a></li>
                    <li><a href="{% url 'core:about' %}">Nosotros</a></li>
                    <li><a href="{% url 'cart:detail' %}">Carrito</a></li>
                    <li><a href="{% url 'core:contact' %}">Contacto</a></li>
                    {% if user.is_authenticated %}
                    <li><a href="{% url 'orders:list' %}">Mis pedidos</a></li>
                    {% if user.can_access_dashboard %}
                    <li><a href="{% url 'dashboard' %}">Panel</a></li>
                    {% endif %}
                    {% if user.is_wholesale %}
                    <li><a href="{% url 'wholesale:panel' %}">Mayoristas</a></li>
                    {% endif %}
                    <li><a href="{% url 'account_logout' %}">Salir</a></li>
                    {% else %}
                    <li><a href="{% url 'account_login' %}" role="button" data-bs-toggle="modal" data-bs-target="#loginModal">Ingresar</a></li>
                    <li><a href="#" role="button" data-bs-toggle="modal" data-bs-target="#signupModal">Registro</a></li>
                    {% endif %}
                </ul>
            </nav>
            <div class="main-header__inner__right">
                <div class="mobile-nav__btn mobile-nav__toggler">
                    <span></span><span></span><span></span>
                </div>
                <a href="#" class="main-header__contac-btn boskery-btn cs-trigger" aria-label="Abrir carrito" style="min-width: 160px;">
                    <span class="boskery-btn__hover"></span><span class="boskery-btn__hover"></span><span class="boskery-btn__hover"></span>
                    <span class="boskery-btn__hover"></span><span class="boskery-btn__hover"></span><span class="boskery-btn__hover"></span>
                    <span class="boskery-btn__text">Ver carrito</span>
                    <i class="icon-cart"></i>
                </a>
            </div>
        </div>
    </div>
</header>
