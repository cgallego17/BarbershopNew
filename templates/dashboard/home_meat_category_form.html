{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}Sección Categorías{% endblock %}
{% block topbar_title %}Sección Categorías (meat-category){% endblock %}
{% block extra_css %}{% include 'dashboard/_admin_styles.html' %}{% endblock %}

{% block content %}
<div class="mb-4">
    <a href="{% url 'admin_panel:home_sections' %}" class="admin-link"><i class="fas fa-arrow-left"></i> Volver a secciones</a>
</div>

<div class="admin-card">
    <div class="admin-card__body">
        <form method="post" enctype="multipart/form-data" class="admin-form">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Subtítulo / Tagline</label>
                    {{ form.tagline }}
                    <p class="form-text small text-muted">Ej: primera opción</p>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Título</label>
                    {{ form.title }}
                    <p class="form-text small text-muted">Ej: Las mejores categorías en nuestra tienda</p>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Imagen superior</label>
                    {{ form.top_image }}
                    {% if block.top_image %}<p class="mt-2 small">Actual: <img src="{{ block.top_image.url }}" alt="" style="max-height:80px"></p>{% endif %}
                </div>
                <div class="col-md-6">
                    <label class="form-label">Imagen de fondo</label>
                    {{ form.background_image }}
                    {% if block.background_image %}<p class="mt-2 small">Actual: <img src="{{ block.background_image.url }}" alt="" style="max-height:60px"></p>{% endif %}
                </div>
            </div>
            <div class="mt-4 d-flex gap-2">
                <button type="submit" class="admin-btn admin-btn--primary">Guardar</button>
                <a href="{% url 'admin_panel:home_sections' %}" class="admin-btn admin-btn--secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>
<p class="text-muted small mt-3">Los ítems del grid (categorías) se generan automáticamente desde las categorías de productos activas. Gestiona categorías en <a href="{% url 'admin_panel:category_list' %}">Productos → Categorías</a>.</p>
{% endblock %}
